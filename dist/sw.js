const VERSION="v7",RR_CACHE={name:"rr-static-v7",static:["/","/index.html","/restaurant.html","/favicon.ico","/favicon-32x32.png","/favicon-16x16.png","/js/app.min.js","/js/home.min.js","/js/restaurant.min.js","/images/placeholder.png","/images/1-small.jpg","/images/1-medium.jpg","/images/1-large.jpg","/images/2-small.jpg","/images/2-medium.jpg","/images/2-large.jpg","/images/3-small.jpg","/images/3-medium.jpg","/images/3-large.jpg","/images/4-small.jpg","/images/4-medium.jpg","/images/4-large.jpg","/images/5-small.jpg","/images/5-medium.jpg","/images/5-large.jpg","/images/6-small.jpg","/images/6-medium.jpg","/images/6-large.jpg","/images/7-small.jpg","/images/7-medium.jpg","/images/7-large.jpg","/images/8-small.jpg","/images/8-medium.jpg","/images/8-large.jpg","/images/9-small.jpg","/images/9-medium.jpg","/images/9-large.jpg","/images/10-small.jpg","/images/10-medium.jpg","/images/10-large.jpg"]},MAP_CACHE={name:"rr-maps-v7"},trimCache=(e,a)=>{caches.open(e).then(i=>i.keys().then(m=>{m.length>a&&i.delete(m[0]).then(trimCache(e,a))}))},cacheThenNetwork=(e,a,{ignoreSearch:i,trim:m})=>caches.open(e).then(s=>s.match(a.url,{ignoreSearch:i}).then(i=>i||fetch(a).then(i=>(m&&m>0&&trimCache(e,m),s.put(a,i.clone()),i)).catch(e=>{})));self.addEventListener("install",e=>{e.waitUntil(caches.open(RR_CACHE.name).then(e=>e.addAll(RR_CACHE.static)).catch(e=>{console.error("ServiceWorker Install failed",e)}))}),self.addEventListener("activate",e=>(e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==RR_CACHE.name&&e!==MAP_CACHE.name).map(e=>caches.delete(e)))).catch(e=>{console.error("ServiceWorker Activate failed",e)})),self.clients.claim())),self.addEventListener("fetch",e=>{const a=new URL(e.request.url);if("https://mws-restaurant-reviews.herokuapp.com"===a.origin)return;let i=RR_CACHE.name;const m={ignoreSearch:!1,trim:0};a.origin===location.origin?e.request.url.includes("/restaurant.html")&&(m.ignoreSearch=!0):e.request.url.includes("tile.openstreetmap.org")&&(i=MAP_CACHE.name,m.trim=6),e.respondWith(cacheThenNetwork(i,e.request,m))});
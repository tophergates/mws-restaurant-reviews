{"version":3,"sources":["webpack:///./src/js/utils/DBHelper.js","webpack:///./src/js/utils/loadGoogleMaps.js","webpack:///./src/js/utils/Map.js","webpack:///./src/styles/restaurant.scss","webpack:///./src/styles/restaurant.scss?676a","webpack:///./src/js/utils/getUrlParameter.js","webpack:///./src/js/controllers/RestaurantController.js"],"names":["DBHelper","photograph","_ref","arguments","length","undefined","concat","this","BASE_URL","id","_ref2","fetch","DB_URL","then","response","ok","Error","json","results","restaurants","catch","console","error","fetchRestaurants","filter","r","restaurantId","fetchRestaurant","_ref3","reviews","Math","max","round","reduce","a","c","rating","toFixed","_config__WEBPACK_IMPORTED_MODULE_0__","HOST","PORT","__webpack_exports__","node","document","body","script","createElement","setAttribute","MAPS_KEY","appendChild","Map","mount","options","callback","_classCallCheck","_options","Object","assign","zoom","center","lat","lng","disableDefaultUI","scrollwheel","element","getElementById","_googleMap","google","maps","markers","lastMarker","setTimeout","data","onClick","_this","bounds","LatLngBounds","map","item","marker","addMarkerWithInfoWindow","extend","position","GoogleMap","fitBounds","setZoom","content","Marker","animation","Animation","DROP","_this2","addMarker","infoWindow","InfoWindow","addListener","close","panTo","getPosition","panBy","forEach","i","setMap","event","clearInstanceListeners","module","exports","__webpack_require__","push","hmr","transform","insertInto","locals","utils_getUrlParameter","param","URLSearchParams","location","search","get","replace","RegExp","exec","decodeURIComponent","self","initMap","RestaurantController","loadMap","generateStarsHtml","star","docFrag","createDocumentFragment","textContent","tmp","cloneNode","generateStarRatingHtml","div","container","top","bottom","className","style","width","restaurant","pageElements","breadcrumbs","querySelector","restaurantContainer","restaurantName","restaurantCuisine","restaurantHoursToday","restaurantAddress","restaurantNeighborhood","restaurantStarRating","restaurantHoursContainer","restaurantImageContainer","reviewsContainer","render","loadGoogleMaps","title","name","fillBreadcrumb","renderRestaurant","generateImage","populateHeader","generateAverageRating","populateAddress","populateDetails","renderReviews","_this$pageElements","_this$restaurant","cuisine","cuisine_type","operatingHours","operating_hours","currentDay","keys","Date","getDay","altText","image","src","restaurantImgUrl","alt","onload","acc","review","averageRating","link","_this$pageElements2","_this$restaurant2","address","neighborhood","table","tr","thead","thead_tr","tbody","tbody_tr","th","td","day","day_th","day_td","innerHTML","includes","generateHoursHtml","paragraph","reviewsList","li","p","reviewTop","reviewBody","username","starRating","date","comment","comments","generateReviewHtml","classList","add","latlng","updateMap"],"mappings":"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","file":"./js/restaurant.min.js","sourcesContent":["import config from '../config';\n\nclass DBHelper {\n  static get BASE_URL() {\n    return `${config.HOST}${config.PORT && `:${config.PORT}`}`;\n  }\n\n  static get DB_URL(){\n    return `./data/restaurants.json`;\n  }\n\n  static restaurantImgUrl({ photograph }, relative = true) {\n    return (relative)\n     ? `./images/${photograph}`\n     : `${this.BASE_URL}/images/${photograph}`;\n  }\n\n  static restaurantUrl({ id }, relative = true) {\n    return (relative)\n     ? `./restaurant.html?id=${id}`\n     : `${this.BASE_URL}/restaurant.html?id=${id}`;\n  }\n\n  static fetchRestaurants() {\n    return fetch(this.DB_URL)\n      .then(response => {\n        if(!response.ok) {\n          throw Error('Unable to retrieve restaurant data');\n        }\n        \n        return response.json();\n      })\n      .then(results => results.restaurants)\n      .catch(console.error);\n  }\n\n  static fetchRestaurant(id) {\n    return this.fetchRestaurants()\n      .then(restaurants => restaurants.filter(r => r.id === id)[0]);\n  }\n\n  static calculateAverageReview(restaurantId) {\n    return this.fetchRestaurant(restaurantId)\n      .then(({ reviews }) => {\n        if (!reviews) return 0;\n\n        // Stand back, we're going to try mathematics!\n        return Math.max(\n                Math.round(\n                  (reviews.reduce((a, c) => a + c.rating, 0) / reviews.length) * 10\n                ) / 10, 1\n              ).toFixed(1);\n      })\n      .catch(console.error);\n  }\n};\n\nexport default DBHelper;\n","import config from '../config';\n\n/**\n * Appends the Google Maps API script at the end of the document.body \n * or the specified node, if provided.\n * @param {HTMLElement} node \n */\nconst loadGoogleMaps = (node = document.body) => {\n  const script = document.createElement('script');\n\n  script.setAttribute('src', `https://maps.googleapis.com/maps/api/js?key=${config.MAPS_KEY}&callback=initMap`);\n  script.setAttribute('async', '');\n  script.setAttribute('defer', '');\n  node.appendChild(script);\n};\n\nexport default loadGoogleMaps;\n","class Map {\n  constructor(mount, options, callback) {\n    const defaultOptions = { \n      zoom: 12, \n      center: {\n        lat: 40.722216,\n        lng: -73.987501\n      }, \n      disableDefaultUI: true,\n      scrollwheel: false,\n    };\n    \n    this._options = Object.assign({}, defaultOptions, options);\n    this.element = mount || document.getElementById('map');\n\n    this._googleMap = new google.maps.Map(this.element, this._options);\n    this.markers = [];\n    this.lastMarker = null;\n\n    // Dirty, dirty hack to delay a callback\n    // Presumably the map will have loaded within \n    // a second?\n    if (callback) {\n      setTimeout(callback, 1000);\n    }\n  }\n\n  get GoogleMap() {\n    return this._googleMap;\n  }\n\n  addMarkers(data, onClick) {\n    let bounds = new google.maps.LatLngBounds();\n    this.markers = data.map(item => {\n      let marker = this.addMarkerWithInfoWindow(item, onClick);\n      bounds.extend(marker.position);\n\n      return marker;\n    });\n\n    // Fit the map to the boundaries of the markers\n    if (this.markers.length > 0) {\n      this.GoogleMap.fitBounds(bounds);\n      this.GoogleMap.setZoom(this._options.zoom);\n    }\n  }\n\n  addMarker({ position, content }) {\n    return new google.maps.Marker({\n      animation: google.maps.Animation.DROP,\n      map: this.GoogleMap,\n      position,\n      content,\n    });\n  }\n\n  addMarkerWithInfoWindow(item, onClick) {\n    // Create a new marker and define marker properties\n    const marker = this.addMarker(item);\n\n    // Create a new infowindow\n    const infoWindow = new google.maps.InfoWindow();\n\n    marker.addListener('click', () => {\n      // Close the most recently opened infowindow\n      this.lastMarker && this.lastMarker.close();\n\n      // Reset the last clicked infowindow to this one\n      this.lastMarker = infoWindow;\n\n      // Pan the map to the center of the clicked marker\n      this.GoogleMap.panTo(marker.getPosition());\n\n      // Pan the map downward to accommodate the info window\n      this.GoogleMap.panBy(0, -150);\n\n      // Show the infowindow\n      onClick(infoWindow, marker);\n    });\n\n    return marker;\n  }\n\n  resetMarkers() {\n    this.markers.forEach((marker, i) => {\n      marker.setMap(null);\n      google.maps.event.clearInstanceListeners(marker);\n    });\n\n    this.markers = [];\n  }\n}\n\nexport default Map;\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".breadcrumbs{background:hsla(0,0%,93%,.25);border-bottom:1px inset rgba(51,51,51,.25);padding:1.06667rem}.breadcrumbs__nav-list{list-style:none;margin:0;padding:0}.breadcrumbs__nav-item{display:inline}.breadcrumbs__nav-item:first-of-type:after{display:inline-block;margin:0 .8rem;transform:rotate(15deg);border-right:.125rem solid currentColor;height:1.2rem;content:\\\"\\\"}.breadcrumbs__nav-item[aria-current=page]{color:#333;font-weight:700;text-decoration:none}.breadcrumbs__nav-item[aria-current=page]:after{content:\\\"\\\"}.breadcrumbs__link{color:#ff3100}.breadcrumbs__link:active,.breadcrumbs__link:focus{outline:none;text-decoration:underline}.restaurant__map-container{display:flex;flex:0 1 auto;flex-direction:column;height:auto;max-width:100%}.restaurant__map-container .restaurant__map{background-color:#e1e1e1;border:1px inset rgba(51,51,51,.25);border-bottom:0;flex:1 0 auto;height:auto;min-height:12.5rem;opacity:1;position:relative;transition:opacity 1s ease;width:100%}.restaurant__map-container .restaurant__map .restaurant__map-loading{color:rgba(51,51,51,.85);display:block;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.restaurant__map-container .restaurant__map-footer{align-items:center;background:rgba(154,255,220,.15);border:1px solid rgba(51,51,51,.25);display:flex;justify-content:space-between}.restaurant__map-container .restaurant__map-footer .restaurant__address-container{flex:1;padding:.8rem}.restaurant__map-container .restaurant__map-footer .restaurant__enlarge-map-button{align-self:stretch;background:#eee;border:0;border-left:1px solid hsla(0,0%,93%,.25);color:#333;cursor:pointer;font-size:160%;font-weight:700;padding:0 1.6rem}.restaurant{display:grid;grid-template-areas:\\\"h\\\" \\\"s\\\" \\\"i\\\" \\\"m\\\" \\\"d\\\" \\\"r\\\"}.restaurant .restaurant__header{grid-area:h}.restaurant .restaurant__star-rating{grid-area:s}.restaurant .restaurant__image-container{grid-area:i;padding:0}.restaurant .restaurant__map-container{grid-area:m}.restaurant .restaurant__details{grid-area:d}.restaurant .restaurant__reviews-container{grid-area:r}@media screen and (min-width:825px){.restaurant{grid:\\\"i i h h h h h\\\" \\\"i i s s s s s\\\" \\\"i i m m m m m\\\" \\\"d d d d d d d\\\" \\\"r r r r r r r\\\";grid-template-columns:250px 1fr repeat(4,1fr);grid-template-rows:auto auto 1fr;column-gap:1rem;margin:0 auto;padding:1.6rem}.restaurant .restaurant__image-container{height:auto;max-height:600px;max-width:800px;margin:auto}.restaurant .restaurant__image-container .restaurant__image{border-radius:2.4rem}}.restaurant__header{padding:.8rem}.restaurant__header .restaurant__name{color:#b22200;font-size:3.2rem;letter-spacing:.025ch;line-height:1;padding-bottom:.8rem}.restaurant__header .restaurant__cuisine,.restaurant__header .restaurant__hours-today{color:#737373;display:block;font-size:1.6rem;padding:0}.restaurant__header .restaurant__hours-today{padding-bottom:.8rem}.restaurant__star-rating,.star-rating{align-items:center;display:flex;flex-wrap:nowrap;margin:-.8rem 0 .8rem;padding:0 .8rem}.restaurant__star-rating .star-rating__container,.star-rating .star-rating__container{unicode-bidi:bidi-override;color:#eee;font-size:1.6rem;flex:0 1 8rem;position:relative;text-shadow:0 1px 0 #333}.restaurant__star-rating .star-rating__container .star-rating__top,.star-rating .star-rating__container .star-rating__top{color:#ffb100;display:block;left:0;overflow:hidden;position:absolute;top:0;width:85%;z-index:1}.restaurant__star-rating .star-rating__container .star-rating__bottom,.star-rating .star-rating__container .star-rating__bottom{display:block;z-index:0}.restaurant__star-rating .star-rating__link,.star-rating .star-rating__link{color:#ff3100;margin:.3rem 0 0 .8rem}.restaurant__details{padding:.8rem}.subheading{color:#b22200;font-size:2.4rem;margin-bottom:.8rem}@media screen and (max-width:550px){.restaurant__hours,.restaurant__hours tbody,.restaurant__hours td,.restaurant__hours th,.restaurant__hours thead,.restaurant__hours tr{display:block}.restaurant__hours thead tr{position:absolute;top:-9999px;left:-9999px}.restaurant__hours tbody tr{border:1px solid #eee;border-radius:.3rem;margin:1.06667rem 0 2.4rem}.restaurant__hours tbody tr:last-child{margin-bottom:0}.restaurant__hours tbody tr td:nth-child(2n){background:hsla(0,0%,93%,.5)}.restaurant__hours tbody tr td:nth-child(4n){border-bottom:1px solid transparent}.restaurant__hours td{border-bottom:1px solid #eee;position:relative;padding:1.06667rem 0 1.06667rem 50%}.restaurant__hours td:before{font-style:normal;position:absolute;left:.5rem;content:attr(data-th);font-weight:700;text-transform:uppercase}}.restaurant__reviews-container{padding:.8rem}.restaurant__review{border:1px solid rgba(51,51,51,.25);border-radius:.8rem;margin-bottom:2rem}.restaurant__review .review__top{background:#333;border-radius:.8rem .8rem 0 0;color:#eee;padding:.8rem}.restaurant__review .review__top .review__username{display:inline-block;text-transform:uppercase;font-size:1.6rem}.restaurant__review .review__top .star-rating{float:right;margin:0;padding:0}.restaurant__review .review__body{padding:.8rem}.restaurant__review .review__date{color:#737373;font-style:italic}.restaurant__review .review__comment{margin:.8rem 0}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--6-2!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--6-2!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--6-2!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/**\n * Returns the value of the specified query string parameter \n * of the current URI.\n */\nconst getUrlParameter = param => {\n  if (!param) return;\n\n  // If URLSearchParams is supported, use that\n  if (URLSearchParams) {\n    const urlParams = new URLSearchParams(location.search);\n    return urlParams.get(param);\n  }\n\n  // Otherwise, parse the param using regular expressions\n  param = param.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${param}=([^&#]*)`);\n  const results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\nexport default getUrlParameter;\n","import config from '../config';\nimport DBHelper from '../utils/DBHelper';\nimport Map from '../utils/Map';\nimport loadGoogleMaps from '../utils/loadGoogleMaps';\nimport getUrlParameter from '../utils/getUrlParameter';\n\nimport \"../../styles/restaurant.scss\";\n\n/**\n * Called when Google Maps API is ready\n * @global\n */\nself.initMap = () => {\n  RestaurantController.loadMap();\n};\n\n/**\n * Calculates average rating percentage\n */\nconst averageRating = reviews => {\n  const TOP_RATING = 5;\n  const total = reviews.reduce((acc, review) => {\n    return acc + review.rating;\n  }, 0);\n\n  return (total / (reviews.length * TOP_RATING) * 100);\n};\n\n/**\n * Generates the HTML output for the operating hours table\n */\nconst generateHoursHtml = operatingHours => {\n  const docFrag = document.createDocumentFragment();\n  const table = document.createElement('table');\n  const tr = document.createElement('tr');\n  const thead = document.createElement('thead');\n  const thead_tr = tr.cloneNode();\n  const tbody = document.createElement('tbody');\n  const tbody_tr = tr.cloneNode();\n  const th = document.createElement('th');\n  const td = document.createElement('td');\n\n  table.className = 'restaurant__hours';\n\n  thead.appendChild(thead_tr);\n  tbody.appendChild(tbody_tr);\n\n  for (let day in operatingHours) {\n    let day_th = th.cloneNode();\n    let day_td = td.cloneNode();\n\n    day_th.textContent = day;\n    day_td.innerHTML = (operatingHours[day].includes(',') ? operatingHours[day].replace(', ', '<br>') : operatingHours[day]);\n    day_td.setAttribute('data-th', day);\n\n    thead_tr.appendChild(day_th);\n    tbody_tr.appendChild(day_td);\n  }\n\n  table.appendChild(thead);\n  table.appendChild(tbody);\n\n  docFrag.appendChild(table);\n  \n  return docFrag;\n};\n\n/**\n * Generates the stars used for the ratings\n */\nconst generateStarsHtml = () => {\n  const RATING_LIMIT = 5;\n  const star = document.createElement('span');\n  const docFrag = document.createDocumentFragment();\n\n  star.textContent = 'â˜…';\n  \n  for (let i=RATING_LIMIT; i>0; i--) {\n    let tmp = star.cloneNode(true);\n    docFrag.appendChild(tmp);\n  }\n\n  return docFrag;\n}\n\n/**\n * Generates the HTML output for a star rating\n */\nconst generateStarRatingHtml = rating => {\n  const div = document.createElement('div');\n\n  const container = div.cloneNode();\n  const top = div.cloneNode();\n  const bottom = div.cloneNode();\n\n  container.className = 'star-rating__container';\n\n  top.className = 'star-rating__top';\n  top.style.width = `${rating}%`;\n  top.appendChild(generateStarsHtml());\n  container.appendChild(top);\n\n  bottom.className = 'star-rating__bottom';\n  bottom.appendChild(generateStarsHtml());\n  container.appendChild(bottom);\n\n  return container;\n};\n\n/**\n * Generates the HTML output for a review\n */\nconst generateReviewHtml = review => {\n  const li = document.createElement('li');\n  const div = document.createElement('div');\n  const p = document.createElement('p');\n  const reviewTop = div.cloneNode();\n  const reviewBody = div.cloneNode();\n  const username = p.cloneNode();\n  const starRating = div.cloneNode();\n  const date = p.cloneNode();\n  const comment = p.cloneNode();\n\n  li.className = 'restaurant__review';\n  reviewTop.className = 'review__top';\n  reviewBody.className = 'review__body';\n\n  // Review Top\n  username.textContent = review.name;\n  username.className = 'review__username';\n  reviewTop.appendChild(username);\n\n  starRating.className = 'star-rating';\n  starRating.setAttribute('aria-label', `User rating: ${review.rating}`);\n  starRating.appendChild(generateStarRatingHtml((review.rating / 5) * 100));\n  reviewTop.appendChild(starRating);\n  \n  // Review Body\n  date.textContent = review.date;\n  date.className = 'review__date';\n  comment.innerHTML = review.comments;\n  comment.className = 'review__comment';\n  reviewBody.appendChild(date);\n  reviewBody.appendChild(comment);\n\n  li.appendChild(reviewTop);\n  li.appendChild(reviewBody);\n\n  return li;\n};\n\n/**\n * The restaurant page controller\n */\nconst RestaurantController = {\n  map: null,\n  restaurant: null,\n  pageElements: {\n    breadcrumbs: document.querySelector('.breadcrumbs__nav-list'),\n    restaurantContainer: document.querySelector('.restaurant'),\n    restaurantName: document.querySelector('.restaurant__name'),\n    restaurantCuisine: document.querySelector('.restaurant__cuisine'),\n    restaurantHoursToday: document.querySelector('.hours-today__text'),\n    restaurantAddress: document.querySelector('.restaurant__address'),\n    restaurantNeighborhood: document.querySelector('.restaurant__neighborhood'),\n    restaurantStarRating: document.querySelector('.restaurant__star-rating'),\n    restaurantHoursContainer: document.querySelector('.restaurant__hours-container'),\n    restaurantImageContainer: document.querySelector('.restaurant__image-container'),\n    reviewsContainer: document.querySelector('.restaurant__reviews-container'),\n  },\n\n  /**\n   * Page controller entry point to begin rendering page elements\n   */\n  render() {\n    const restaurantId = +getUrlParameter('id');\n\n    if (!restaurantId) {\n      console.error('The restaurant ID could not be located');\n      return;\n    }\n\n    DBHelper.fetchRestaurant(restaurantId)\n      .then(restaurant => {\n        if (!restaurant) {\n          console.error(`Unable to retrieve a restaurant with the ID ${restaurantId}`);\n          return;\n        }\n\n        loadGoogleMaps();\n        this.restaurant = restaurant;\n        document.title += ` | ${this.restaurant.name}`;\n\n        this.fillBreadcrumb();\n        this.renderRestaurant();\n      })\n      .catch(console.error);\n  },\n\n  /**\n   * Renders restaurant information\n   */\n  renderRestaurant() {\n    // Populate restaurant content\n    this.generateImage();\n    this.populateHeader();\n    this.generateAverageRating();\n    this.populateAddress();\n    this.populateDetails();\n    this.renderReviews();\n  },\n\n  /**\n   * Populates the restaurant header with content\n   */\n  populateHeader() {\n    const { restaurantName, restaurantCuisine, restaurantHoursToday } = this.pageElements;\n    const { name, cuisine_type: cuisine, operating_hours: operatingHours } = this.restaurant;\n    const daysOfTheWeek = Object.keys(operatingHours);\n    const currentDay = daysOfTheWeek[new Date().getDay() - 1];\n    \n    restaurantName.textContent = name;\n    restaurantCuisine.textContent = cuisine;\n    restaurantHoursToday.textContent = operatingHours[currentDay];\n  },\n\n  /**\n   * Generates an IMG element for the current restaurant\n   */\n  generateImage() {\n    const { restaurantImageContainer } = this.pageElements;\n    const { altText } = this.restaurant;\n    const image = document.createElement('img');\n\n    image.src = DBHelper.restaurantImgUrl(this.restaurant);\n    image.alt = altText;\n    image.className = 'restaurant__image';\n    image.onload = event => {\n      restaurantImageContainer.appendChild(image);\n    };\n  },\n\n  /**\n   * Generates the average star rating\n   */\n  generateAverageRating() {\n    const { restaurantStarRating } = this.pageElements;\n    const { reviews } = this.restaurant;\n    const rating = averageRating(reviews);\n    const link = document.createElement('a');\n\n    // Add stars\n    restaurantStarRating.appendChild(generateStarRatingHtml(rating));\n\n    // Add link\n    link.setAttribute('href', '#reviews');\n    link.setAttribute('title', 'Skip to customer reviews');\n    link.className = 'star-rating__link';\n    link.textContent = `${reviews.length} reviews`;\n\n    restaurantStarRating.appendChild(link);\n  },\n\n  /**\n   * Populates the restaurant address and neighborhood\n   */\n  populateAddress() {\n    const { restaurantAddress, restaurantNeighborhood } = this.pageElements;\n    const { address, neighborhood } = this.restaurant;\n\n    restaurantAddress.textContent = address;\n    restaurantNeighborhood.textContent = neighborhood;\n  },\n\n  /**\n   * Populates restaurant details section\n   */\n  populateDetails() {\n    const { restaurantHoursContainer } = this.pageElements;\n    const { operating_hours: operatingHours } = this.restaurant;\n\n    restaurantHoursContainer.appendChild(generateHoursHtml(operatingHours));\n  },\n  \n  /**\n   * Renders reviews if there are any\n   */\n  renderReviews() {\n    const { reviews } = this.restaurant;\n    const { reviewsContainer } = this.pageElements;\n    const docFrag = document.createDocumentFragment();\n\n    if (!reviews) {\n      const paragraph = document.createElement('p');\n\n      paragraph.textContent = `${this.restaurant.name} does not have any reviews`;\n      paragraph.className = 'restaurant-reviews__empty';\n      reviewsContainer.appendChild(paragraph);\n\n      return;\n    }\n\n    const reviewsList = document.createElement('ul');\n    reviewsList.className = 'restaurant__reviews';\n\n    reviews.forEach(review => {\n      docFrag.appendChild(generateReviewHtml(review));\n    });\n\n    reviewsList.appendChild(docFrag);\n    reviewsContainer.appendChild(reviewsList);\n  },\n\n  /**\n   * Populates the page breadcrumbs\n   */\n  fillBreadcrumb() {\n    const { breadcrumbs } = this.pageElements;\n    const li = document.createElement('li');\n    \n    li.textContent = this.restaurant.name;\n    li.classList.add('breadcrumbs__nav-item');\n    li.setAttribute('aria-current', 'page');\n\n    breadcrumbs.appendChild(li);\n  },\n\n  /**\n   * Called by initMap once Google Maps API is ready.\n   * Create a new map and updates it\n   */\n  loadMap() {\n    this.map = new Map(null, {\n      zoom: 16,\n      center: this.restaurant.latlng,\n      scrollwheel: false,\n    }, () => {\n      document.querySelector('#map iframe').title = 'Restaurant Location';\n    });\n\n    this.restaurant && this.updateMap();\n  },\n\n  /**\n   * Updates the Google Map\n   */\n  updateMap() {\n    if (!this.map) {\n      return;\n    }\n\n    this.map.addMarker({\n      position: this.restaurant.latlng,\n      content: {}\n    });\n  }\n}\n\nexport default RestaurantController;\n"],"sourceRoot":""}
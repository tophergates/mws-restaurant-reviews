{"version":3,"sources":["webpack:///./src/styles/restaurant.scss","webpack:///./src/styles/restaurant.scss?bf82","webpack:///./node_modules/dateformat/lib/dateformat.js","webpack:///./src/js/controllers/RestaurantController2.js"],"names":["module","exports","__webpack_require__","push","i","content","options","hmr","transform","insertInto","undefined","locals","__WEBPACK_AMD_DEFINE_RESULT__","global","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","arguments","length","val","Array","isArray","toString","call","slice","toLowerCase","test","Date","isNaN","TypeError","maskSlice","String","masks","_","d","D","m","y","H","M","s","L","o","getTimezoneOffset","W","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","Math","floor","getWeek","N","dow","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","round","t","timeNames","tt","T","TT","Z","match","pop","replace","abs","S","len","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","restaurantSectionHTML","restaurant","_ref2","address","name","cuisine","hours","is_favorite","daysOfTheWeek","todayNum","currentDay","favoriteClass","favoriteText","favoriteAria","_ref","className","id","altText","image","reviews","averageReview","starRating","link","operatingHours","html","cuisine_type","operating_hours","Object","keys","concat","_utils__WEBPACK_IMPORTED_MODULE_1__","src","restaurantImgUrl","size","sizes","alt","tableHeaders","tableBody","day","includes","join","restaurantOperatingHoursHTML","reviewItemHTML","_ref4","comments","createdAt","rating","pending","MAX_REVIEW_SCORE","dateformat__WEBPACK_IMPORTED_MODULE_0___default","reviewsSectionHTML","fill","reviewFormHTML","map","reviewsHTML","RestaurantController","state","errors","isLoading","online","navigator","onLine","elements","breadcrumbs","document","querySelector","restaurantContainer","reviewsContainer","setState","fn","prevState","this","assign","render","init","_this","restaurantId","fetchRestaurantWithReviews","then","_ref6","loadMap","catch","_ref7","window","addEventListener","addPendingReviews","bind","_ref5","notLoadingNoErrors","_this$state","innerHTML","error","updatePage","title","populateRestaurant","latlng","zoom","center","lat","lng","dragging","addMarkers","position","event","target","closePopup","populateReviews","addNewReview","_this2","preventDefault","_event$target$element","review","restaurant_id","value","substring","addRestaurantReview","updatedReviews","calculateAverageReview","_this3","_ref8","handleFavoriteChange","_this4","_this$state$restauran","favorite","setFavoriteRestaurant","newRestaurant","console","log","_ref9","__webpack_exports__"],"mappings":"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","file":"./js/restaurant.min.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".breadcrumbs{background:hsla(0,0%,93%,.25);border-bottom:1px inset rgba(51,51,51,.25);min-height:4.6666rem;padding:1.06667rem}.breadcrumbs__nav-list{list-style:none;margin:0;padding:0}.breadcrumbs__nav-item{display:inline}.breadcrumbs__nav-item:first-of-type:after{display:inline-block;margin:0 .8rem;transform:rotate(15deg);border-right:.125rem solid currentColor;height:1.2rem;content:\\\"\\\"}.breadcrumbs__nav-item[aria-current=page]{color:#333;font-weight:700;text-decoration:none}.breadcrumbs__nav-item[aria-current=page]:after{content:\\\"\\\"}.breadcrumbs__link{color:#b22200}.breadcrumbs__link:active,.breadcrumbs__link:focus{outline:none;text-decoration:underline}.restaurant__map-container{display:flex;flex:0 1 auto;flex-direction:column;height:auto;max-width:100%}.restaurant__map-container .restaurant__map{background-color:transparent;border:1px inset rgba(51,51,51,.25);border-bottom:0;flex:1 0 auto;height:auto;min-height:12.5rem;opacity:1;position:relative;transition:opacity 1s ease;width:100%}.restaurant__map-container .restaurant__map .restaurant__map-loading{color:rgba(51,51,51,.85);display:block;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.restaurant{display:grid;grid-template-areas:\\\"h\\\" \\\"s\\\" \\\"i\\\" \\\"m\\\" \\\"d\\\" \\\"r\\\"}.restaurant .restaurant__header{grid-area:h}.restaurant .restaurant__star-rating{grid-area:s}.restaurant .restaurant__image-container{grid-area:i;padding:0;min-width:100%}.restaurant .restaurant__image-container .restaurant__image{width:100%}.restaurant .restaurant__map-container{grid-area:m}.restaurant .restaurant__details{grid-area:d}.restaurant .restaurant__reviews-container{grid-area:r}@media screen and (min-width:825px){.restaurant{grid:\\\"i i h h h h h\\\" \\\"i i s s s s s\\\" \\\"i i d d d d d\\\";grid-template-columns:250px 1fr repeat(4,1fr);grid-template-rows:auto auto 1fr;column-gap:1rem;margin:0 2rem;padding:1.6rem}.restaurant .restaurant__image-container{height:auto;max-height:600px;max-width:800px;margin:auto}.restaurant .restaurant__image-container .restaurant__image{border-radius:2.4rem}}.restaurant__header{padding:.8rem}.restaurant__header .restaurant__name{display:flex;justify-content:space-between}.restaurant__header .restaurant__name .restaurant__name--text{color:#b22200;font-size:3.2rem;letter-spacing:.025ch;line-height:1;padding-bottom:.8rem}.restaurant__header .restaurant__name .restaurant__favorite{background:transparent;border:none}.restaurant__header .restaurant__name .restaurant__favorite.true{color:#b22200}.restaurant__header .restaurant__name .restaurant__favorite.false{color:#333}.restaurant__header .restaurant__cuisine,.restaurant__header .restaurant__hours-today{color:#737373;display:block;font-size:1.6rem;padding:0}.restaurant__header .restaurant__hours-today{padding-bottom:.8rem}.restaurant__star-rating,.star-rating{align-items:center;display:flex;flex-wrap:nowrap;margin:-.8rem 0 .8rem;padding:0 .8rem}.restaurant__star-rating .star-rating__container{color:#666}.restaurant__details{padding:.8rem}.subheading{color:#b22200;font-size:2.4rem;margin-bottom:.8rem}.restaurant__hours{border:0;border-collapse:collapse;min-width:100%}.restaurant__hours thead th{background:#b22200;color:#fff}.restaurant__hours td{padding:.8rem;text-align:center}@media screen and (max-width:550px){.restaurant__hours,.restaurant__hours tbody,.restaurant__hours td,.restaurant__hours th,.restaurant__hours thead,.restaurant__hours tr{display:block}.restaurant__hours thead tr{position:absolute;top:-9999px;left:-9999px}.restaurant__hours tbody tr{border:1px solid #eee;border-radius:.3rem;margin:1.06667rem 0 2.4rem}.restaurant__hours tbody tr:last-child{margin-bottom:0}.restaurant__hours tbody tr td:nth-child(2n){background:hsla(0,0%,93%,.5)}.restaurant__hours tbody tr td:nth-child(4n){border-bottom:1px solid transparent}.restaurant__hours td{border-bottom:1px solid #eee;position:relative;padding:1.06667rem 0 1.06667rem 50%}.restaurant__hours td:before{font-style:normal;position:absolute;left:.5rem;content:attr(data-th);font-weight:700;text-transform:uppercase}}.restaurant__reviews-container{padding:1.06667rem}@media screen and (min-width:825px){.restaurant__reviews-container{margin:0 3rem}.restaurant__reviews-container .review-form__container{float:left;margin-right:1.06667rem;min-width:32rem;padding:1.06667rem}.restaurant__reviews-container .review-form__container .review-form__title{font-size:1.8rem}}.review-form .review-form__row{padding:.8rem 0}.review-form .review-form__row label{font-weight:700}.review-form .review-form__row input,.review-form .review-form__row select,.review-form .review-form__row textarea{background:transparent;border:1px solid #333;font-size:1.6rem;width:100%}.review-form .review-form__row select{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:5px;color:#ffb100}.review-form .review-form__row textarea{min-height:15rem}.review-form .review-form__row .submit-button{background:#9affdc;color:#333;padding:.8rem;width:100%}.restaurant__reviews{display:grid;grid-row-gap:3rem;grid-column-gap:3rem;grid-template-columns:repeat(auto-fill,minmax(32rem,100%))}.restaurant__reviews .restaurant__review{border:1px solid rgba(51,51,51,.25);border-radius:.8rem;margin-bottom:2rem}.restaurant__reviews .restaurant__review .review__top{background:#333;border-radius:.8rem .8rem 0 0;color:#eee;padding:.8rem}.restaurant__reviews .restaurant__review .review__top .review__username{display:inline-block;text-transform:uppercase;font-size:1.6rem}.restaurant__reviews .restaurant__review .review__top .star-rating{float:right;margin:0;padding:0}.restaurant__reviews .restaurant__review .review__body{padding:.8rem}.restaurant__reviews .restaurant__review .review__date{color:#737373;font-style:italic}.restaurant__reviews .restaurant__review .review__comment{margin:.8rem 0}.restaurant__reviews .restaurant__review.offline .review__top{background:#b22200}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./restaurant.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","import dateformat from 'dateformat';\n\nimport {\n  DBHelper,\n  getUrlParameter,\n  lazyLoadImages,\n  makeImage,\n  makeStarRating,\n  Map\n} from '../utils';\nimport '../../styles/restaurant.scss';\n\nconst restaurantImageHTML = ({ id, altText }, className) => {\n  const image = makeImage({\n    id,\n    src: DBHelper.restaurantImgUrl({ id, size: 'small' }),\n    sizes: '100vw',\n    alt: altText,\n    className\n  });\n\n  return `<div class=\"restaurant__image-container\">${image}</div>`;\n};\n\nconst restaurantHeaderHTML = ({\n  address,\n  name,\n  cuisine_type: cuisine,\n  operating_hours: hours,\n  is_favorite\n}) => {\n  const daysOfTheWeek = Object.keys(hours);\n  const todayNum = new Date().getDay();\n  const currentDay = daysOfTheWeek[todayNum > 0 ? todayNum - 1 : todayNum];\n  const favoriteClass = `restaurant__favorite ${is_favorite}` || `restaurant__favorite false`;\n  const favoriteText = is_favorite === 'true' ? 'Favorite' : 'Make a Favorite';\n  const favoriteAria = is_favorite === 'true' ? 'Remove as a favorite' : 'Mark as a favorite';\n\n  return `\n    <div class=\"restaurant__header\">\n      <div class=\"restaurant__name\">\n        <h2 class=\"restaurant__name--text\">${name}</h2>\n        <button aria-label=\"${favoriteAria}\" class=\"${favoriteClass}\">♥ ${favoriteText}</button> \n      </div>\n      <address class=\"restaurant__address\">${address}</address>\n      <span class=\"restaurant__cuisine\">${cuisine}</span>\n      <p class=\"restaurant__hours-today\">Hours today:\n        <span class=\"hours-today__text\">${hours[currentDay]}</span>\n      </p>\n    </div>\n  `;\n};\n\nconst restaurantAverageRatingHTML = (reviews, averageReview) => {\n  const starRating = makeStarRating(averageReview);\n  const link = `<a href=\"#reviews\" title=\"Skip to customer reviews\" class=\"star-rating__link\">${\n    reviews.length\n  } reviews</a>`;\n\n  return `\n    <div class=\"restaurant__star-rating\">\n      ${starRating}\n      ${link}\n    </div>\n  `;\n};\n\nconst restaurantOperatingHoursHTML = operatingHours => {\n  const tableHeaders = [];\n  const tableBody = [];\n\n  for (let day in operatingHours) {\n    const html = operatingHours[day].includes(',')\n      ? operatingHours[day].replace(', ', '<br>')\n      : operatingHours[day];\n\n    tableHeaders.push(`<th>${day}</th>`);\n    tableBody.push(`<td data-th=\"${day}\">${html}</td>`);\n  }\n\n  return `\n    <table class=\"restaurant__hours\">\n      <thead>${tableHeaders.join('')}</thead>\n      <tbody>${tableBody.join('')}</tbody>\n    </table>\n  `;\n};\n\nconst restaurantDetailsHTML = ({ operating_hours }) => {\n  const operatingHours = restaurantOperatingHoursHTML(operating_hours);\n\n  return `\n    <div class=\"restaurant__details\">\n      <div class=\"restaurant__hours-container\">\n        <h3 class=\"subheading\">Operating Hours</h3>\n        ${operatingHours}\n      </div>\n    </div>\n  `;\n};\n\nconst restaurantSectionHTML = restaurant => {\n  const html = [];\n\n  html.push(restaurantHeaderHTML(restaurant));\n  html.push(restaurantImageHTML(restaurant, 'restaurant__image'));\n  html.push(restaurantAverageRatingHTML(restaurant.reviews, restaurant.averageReview));\n  html.push(restaurantDetailsHTML(restaurant));\n\n  return html.join('');\n};\n\nconst reviewFormHTML = () => {\n  const options = [];\n\n  for (let i = 1; i <= DBHelper.MAX_REVIEW_SCORE; i++) {\n    options.push(\n      `<option value=${i}>${Array(i)\n        .fill('★')\n        .join('')}</option>`\n    );\n  }\n\n  return `\n    <div class=\"review-form__container\">\n      <h4 class=\"review-form__title\">Add Review</h4>\n      <form class=\"review-form\">\n        <div class=\"review-form__row\">\n          <label for=\"author\">Author:</label>\n          <input type=\"text\" name=\"name\" id=\"author\" required>\n        </div>\n        <div class=\"review-form__row\">\n          <label for=\"rating\">Rating:</label>\n          <select aria-label=\"Select rating\" id=\"rating\" name=\"rating\" required>\n            ${options.join('')}\n          </select>\n        </div>\n        <div class=\"review-form__row\">\n          <label for=\"comments\">Comments:</label>\n          <textarea id=\"comments\" name=\"comments\" required></textarea>\n        </div>\n        <div class=\"review-form__row\">\n          <button class=\"submit-button\">Submit</button>\n        </div>\n      </form>\n    </div>\n  `;\n};\n\nconst reviewItemHTML = ({ comments, createdAt, name, rating, pending }) => {\n  return `\n    <li class=\"restaurant__review${pending === true ? ' offline' : ''}\">\n      <div class=\"review__top\">\n        <p class=\"review__username\">${name}</p>\n        <div class=\"star-rating\" aria-label=\"User rating: ${rating}\">\n          ${makeStarRating((rating / DBHelper.MAX_REVIEW_SCORE) * 100)}\n        </div>\n      </div>\n      <div class=\"review__body\">\n        <p class=\"review__date\">${dateformat(new Date(createdAt), 'mm/dd/yyyy h:MM TT')}</p>\n        <p class=\"review__comment\">${comments}</p>\n      </div>\n    </li>\n  `;\n};\n\nconst reviewsHTML = reviews => {\n  const html = [];\n\n  if (!reviews || (reviews && reviews.length === 0)) {\n    html.push(\n      `<p class=\"restaurant-reviews__empty\">There are currently no reviews for this restaurant. Yours could be first!</p>`\n    );\n    return html.join('');\n  }\n\n  html.push(`<ul class=\"restaurant__reviews\">`);\n  html.push(reviews.map(reviewItemHTML).join(''));\n  html.push(`</ul>`);\n\n  return html.join('');\n};\n\nconst reviewsSectionHTML = reviews => {\n  const html = [];\n\n  html.push(`<h3 class=\"subheading\">User Reviews</h3>`);\n  html.push(reviewFormHTML());\n  html.push(reviewsHTML(reviews));\n\n  return html.join('');\n};\n\nconst RestaurantController = {\n  state: {\n    restaurant: null,\n    errors: [],\n    isLoading: true,\n    online: navigator.onLine\n  },\n\n  map: null,\n\n  elements: {\n    breadcrumbs: document.querySelector('.breadcrumbs'),\n    restaurantContainer: document.querySelector('.restaurant'),\n    reviewsContainer: document.querySelector('.restaurant__reviews-container')\n  },\n\n  /**\n   * Sets the state and rerenders.\n   * @param {function} fn\n   */\n  setState(fn) {\n    const prevState = this.state;\n    this.state = Object.assign(prevState, fn(prevState));\n    this.render();\n  },\n\n  /**\n   * Initiates the first render, then attempts to fetch restaurants update the state.\n   */\n  init() {\n    this.render();\n    const restaurantId = +getUrlParameter('id');\n\n    if (!restaurantId) {\n      this.setState(({ errors, isLoading }) => ({\n        errors: [...errors, `A restaurant ID was not specified.`],\n        isLoading: !isLoading\n      }));\n\n      return;\n    }\n\n    DBHelper.fetchRestaurantWithReviews(restaurantId)\n      .then(restaurant => {\n        this.setState(({ isLoading }) => ({\n          restaurant,\n          errors: [],\n          isLoading: !isLoading\n        }));\n\n        this.loadMap();\n      })\n      .catch(() => {\n        this.setState(({ errors, isLoading }) => ({\n          errors: [...errors, `Oh no! We were unable to locate the restaurant you requested.`],\n          isLoading: !isLoading\n        }));\n      });\n\n    window.addEventListener('online', this.addPendingReviews.bind(this));\n  },\n\n  /**\n   * Checks if the the loading state is true or if there are errors.\n   * If loading or there are errors, it returns false. Otherwise, true.\n   * This also populates the restaurant result element depending on the state.\n   */\n  notLoadingNoErrors() {\n    const { isLoading, errors } = this.state;\n    const { restaurantContainer } = this.elements;\n\n    if (isLoading) {\n      restaurantContainer.innerHTML = `<p class=\"restaurant-result info\">Loading restaurant...</p>`;\n      return false;\n    } else if (errors && errors.length > 0) {\n      const html = errors.map(error => `<p>${error}</p>`).join('');\n      restaurantContainer.innerHTML = `<div class=\"restaurant-result error\">${html}</div>`;\n      return false;\n    }\n\n    return true;\n  },\n\n  updatePage() {\n    const { name } = this.state.restaurant;\n    const { breadcrumbs } = this.elements;\n\n    document.title += ` | ${name}`;\n\n    breadcrumbs.innerHTML = `\n      <ol class=\"breadcrumbs__nav-list\">\n        <li class=\"breadcrumbs__nav-item\">\n          <a href=\"./\" class=\"breadcrumbs__link\" title=\"Return to the Restaurant Reviews home page\">Home</a>\n        </li>\n        <li class=\"breadcrumbs__nav-item\" aria-current=\"page\">${name}</li>\n      </ol>\n    `;\n  },\n\n  populateRestaurant() {\n    const { restaurant } = this.state;\n    const { restaurantContainer } = this.elements;\n\n    restaurantContainer.innerHTML = restaurantSectionHTML(restaurant);\n    lazyLoadImages();\n  },\n\n  loadMap() {\n    const { latlng } = this.state.restaurant;\n\n    // Create the map\n    this.map = new Map(document.querySelector('.restaurant__map'), {\n      zoom: 16,\n      center: [latlng.lat, latlng.lng],\n      dragging: false\n    });\n\n    // Add a marker\n    this.map.addMarkers(\n      [\n        {\n          position: [latlng.lat, latlng.lng]\n        }\n      ],\n      event => event.target.closePopup()\n    );\n  },\n\n  populateReviews() {\n    const { reviews } = this.state.restaurant;\n    const { reviewsContainer } = this.elements;\n\n    reviewsContainer.innerHTML = reviewsSectionHTML(reviews);\n  },\n\n  addNewReview(event) {\n    event.preventDefault();\n\n    const { name, rating, comments } = event.target.elements;\n    const review = {\n      restaurant_id: this.state.restaurant.id,\n      rating: +rating.value,\n      name: name.value,\n      comments: comments.value.substring(0, 300),\n      createdAt: new Date()\n    };\n\n    DBHelper.addRestaurantReview(review).then(updatedReviews => {\n      const { restaurant } = this.state;\n\n      if (updatedReviews && Array.isArray(updatedReviews)) {\n        restaurant.reviews = updatedReviews;\n      } else {\n        restaurant.reviews.push(Object.assign(review, { pending: true }));\n      }\n\n      restaurant.averageReview = DBHelper.calculateAverageReview(restaurant.reviews);\n      this.setState(() => ({ restaurant }));\n    });\n  },\n\n  addPendingReviews() {\n    if (navigator.onLine) {\n      const { restaurant } = this.state;\n\n      DBHelper.addPendingReviews(restaurant.id).then(updatedReviews => {\n        if (Array.isArray(updatedReviews) && updatedReviews.length > 0) {\n          this.setState(({ restaurant }) => {\n            restaurant.reviews = updatedReviews;\n            restaurant.averageReview = DBHelper.calculateAverageReview(restaurant.reviews);\n\n            return { restaurant };\n          });\n        }\n      });\n    }\n  },\n\n  handleFavoriteChange() {\n    const { id, is_favorite } = this.state.restaurant;\n    const favorite = is_favorite === 'true' ? true : false;\n\n    DBHelper.setFavoriteRestaurant(id, !favorite).then(newRestaurant => {\n      console.log(newRestaurant.is_favorite);\n\n      this.setState(({ restaurant }) => ({\n        restaurant: Object.assign({}, restaurant, { is_favorite: newRestaurant.is_favorite })\n      }));\n    });\n  },\n\n  /**\n   * Kicks of rendering the page. It is called whenever the state is updated.\n   */\n  render() {\n    if (this.notLoadingNoErrors()) {\n      // Update breadcrumbs and page title\n      this.updatePage();\n\n      // Populate the restaurants list and lazy load the images\n      this.populateRestaurant();\n      this.populateReviews();\n\n      document\n        .querySelector('.review-form')\n        .addEventListener('submit', this.addNewReview.bind(this));\n\n      document\n        .querySelector('.restaurant__favorite')\n        .addEventListener('click', this.handleFavoriteChange.bind(this));\n    }\n  }\n};\n\nexport default RestaurantController;\n"],"sourceRoot":""}